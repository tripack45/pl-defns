\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{ctillst-common}[\texttt{CTILLST} Definitions: Common]

\makeatletter

\stackMath
\def\cc@dot{\scalebox{1.15}{$\SavedStyle\cdot$}}
\def\generic@form#1#2{\stackunder[#1]{\stackon[#2]{\SavedStyle\sim}{\cc@dot}}{\cc@dot}}
\def\wavy@div{\mathrel{\ThisStyle{\mathchoice%
  {\generic@form{-2.5pt}{-1.5pt}}%
  {\generic@form{-2.5pt}{-1.5pt}}%
  {\generic@form{-2.0pt}{-1.1pt}}%
  {\generic@form{-1.4pt}{-0.8pt}}%
}}}


\ProvideDocumentCommand{\wavydiv}{}{\mathrel{\wavy@div}}

% Utility Commands - Should probably be moved to a new file
% \NewDocumentCommand{\JPost}{m m}{#1 \; #2}
% \NewDocumentCommand{\cdbraces}{m}{\Opn{\{} #1 \Opn{\}}}
% \NewDocumentCommand{\cdsqbracks}{m}{\Opn{[}{#1}\Opn{]}}
% \NewDocumentCommand{\cdparens}{m}{\Opn{(}\,#1\,\Opn{)}}
% \NewDocumentCommand{\cdnoparens}{m}{#1}
% \NewDocumentCommand{\noparens}{m}{#1}
% \NewDocumentCommand{\cdcdc}{}{\Opn{,}\dots\Opn{,}}
% \NewDocumentCommand{\cdcds}{}{\Opn{;}\dots\Opn{;}}
% \NewDocumentCommand{\cdseq}{m m}{#2_{1}\cdcdc #2_{#1}}
% \NewDocumentCommand{\cdzeq}{m m}{#2_{0}\cdcdc #2_{#1-1}}
% \NewDocumentCommand{\cdsseq}{m m}{#2_{1}\cdcds #2_{#1}}
% \NewDocumentCommand{\cdszeq}{m m}{#2_{0}\cdcds #2_{#1-1}}
% \NewDocumentCommand{\cdpseq}{m m m m}{{#3}_{1}{#2}{#4}_{1}\cdcdc{#3}_{#1}{#2}{#4}_{#1}}
% \NewDocumentCommand{\cdpzeq}{m m m m}{{#3}_{0}{#2}{#4}_{0}\cdcdc{#3}_{#1-1}{#2}{#4}_{#1-1}}
% \NewDocumentCommand{\cdptbracks}{m}{\langle {#1}\rangle}
% \NewDocumentCommand{\cdbar}{}{|}
% \NewDocumentCommand{\casesepcst}{}{\ensuremath{\mathbin{\cdbar}}}
% \NewDocumentCommand{\casebrcst}{}{\ensuremath{\mathbin{\hookrightarrow}}}
% \DeclarePairedDelimiter{\parens}{(}{)}
% \DeclarePairedDelimiter{\sqbracks}{[}{]}

% Sorts
\NewDocumentCommand{\sort}{m}{\jdg@Syn{#1}}
\DeclareDocumentCommand{\TypeSort}{}{\sort{Type}}
\NewDocumentCommand{\CommandSort}{}{\sort{Computation}}
\NewDocumentCommand{\ValSort}{}{\sort{Value}}
\NewDocumentCommand{\MessageSort}{}{\sort{Msg}}
\NewDocumentCommand{\ContSort}{}{\sort{Cont}}
\NewDocumentCommand{\CostSort}{}{\sort{Cost}}
\NewDocumentCommand{\DurationSort}{}{\sort{Duration}}

\DeclareDocumentCommand{\subsup@}{m m m}{%
\IfNoValueTF{#2}%
{\IfNoValueTF{#3}{#1}{{#1}^{#3}}}%
{\IfNoValueTF{#3}{{#1}_{#2}}{{#1}_{#2}^{#3}}}%
}

\DeclareDocumentCommand{\EntailsF}{m m m}{%
\IfBooleanTF{#1}%
{\mathrel{\subsup@{\gg}{#2}{#3}}}%
{\mathrel{\subsup@{\vDash}{#2}{#3}}}%
}
\DeclareDocumentCommand{\EntailsSub}{s m d<>}{\EntailsF{#1}{#2}{#3}}
\DeclareDocumentCommand{\Entails}{s o d<>}{\EntailsF{#1}{#2}{#3}}
\makeatother
